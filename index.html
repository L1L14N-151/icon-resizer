<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Icon Resizer</title>
    <link rel="stylesheet" type="text/css" href="./style.css" />
  </head>
  <body>
    <div class="app">
      <header class="app-header">
        <h1>
          <svg class="logo" width="24" height="24" viewBox="0 0 24 24" fill="none">
            <rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/>
            <rect x="14" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/>
            <rect x="3" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/>
            <rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/>
          </svg>
          Icon Resizer
        </h1>
        <div class="header-actions">
          <button id="themeToggle" class="theme-toggle" title="Changer de thème">
            <svg class="theme-icon" data-theme="dark" width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <svg class="theme-icon hidden" data-theme="light" width="20" height="20" viewBox="0 0 24 24" fill="none">
              <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2"/>
              <line x1="12" y1="1" x2="12" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <line x1="12" y1="21" x2="12" y2="23" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <line x1="1" y1="12" x2="3" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <line x1="21" y1="12" x2="23" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
          <button id="langToggle" class="lang-toggle" title="Change language">
            <span class="lang-flag" data-lang="fr">
              <img src="https://images.icon-icons.com/4023/PNG/512/fra_fr_france_flag_icon_255812.png" alt="FR" width="20" height="14" />
            </span>
            <span class="lang-flag hidden" data-lang="en">
              <img src="https://images.icon-icons.com/4023/PNG/512/united_kingdom_gb_gbr_flag_icon_255824.png" alt="EN" width="20" height="14" />
            </span>
          </button>
          <a href="history.html" class="history-toggle" title="Historique" data-i18n-title="history">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
          <span class="version">v2.0</span>
        </div>
      </header>

      <main class="app-main">
        <!-- Zone principale de drop et upload -->
        <section class="upload-zone" id="dropZone">
          <input id="fileInput" type="file" accept="image/*" class="file-input" />
          <label for="fileInput" class="upload-label">
            <svg class="upload-icon" width="48" height="48" viewBox="0 0 24 24" fill="none">
              <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="upload-text">
              <strong data-i18n="dropZone.title">Glissez votre image ici</strong>
              <small data-i18n="dropZone.subtitle">ou cliquez pour parcourir • Ctrl+V pour coller</small>
              <small class="formats" data-i18n="dropZone.formats">PNG • SVG • JPG • WebP</small>
            </span>
          </label>
          <div class="file-info hidden" id="fileInfo">
            <span class="file-name" id="fileName"></span>
            <button type="button" class="btn-remove" id="removeFile">×</button>
          </div>
        </section>

        <!-- Configuration -->
        <section class="config-panel">
          <!-- Preset Selection -->
          <div class="config-section">
            <div class="section-header">
              <h3 data-i18n="section.chooseFormat">1. Choisir un format</h3>
            </div>
            <div class="preset-grid">
              <button type="button" class="preset-card" data-preset="chrome">
                <span class="preset-icon">
                  <img src="https://images.icon-icons.com/2552/PNG/512/chrome_browser_logo_icon_153007.png" alt="Chrome" />
                </span>
                <span class="preset-name" data-i18n="preset.chrome">Chrome</span>
                <span class="preset-sizes" data-count="4">4 tailles</span>
              </button>
              <button type="button" class="preset-card" data-preset="firefox">
                <span class="preset-icon">
                  <img src="https://images.icon-icons.com/2552/PNG/512/firefox_browser_logo_icon_152991.png" alt="Firefox" />
                </span>
                <span class="preset-name" data-i18n="preset.firefox">Firefox</span>
                <span class="preset-sizes" data-count="6">6 tailles</span>
              </button>
              <button type="button" class="preset-card" data-preset="safari">
                <span class="preset-icon">
                  <img src="https://images.icon-icons.com/2552/PNG/512/safari_ios_browser_logo_icon_152966.png" alt="Safari" />
                </span>
                <span class="preset-name" data-i18n="preset.safari">Safari</span>
                <span class="preset-sizes" data-count="7">7 tailles</span>
              </button>
              <button type="button" class="preset-card" data-preset="favicon">
                <span class="preset-icon">
                  <svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                    <rect x="4" y="4" width="40" height="40" rx="4" fill="#FF5722"/>
                    <rect x="8" y="8" width="8" height="8" fill="#FFF"/>
                    <rect x="20" y="8" width="8" height="8" fill="#FFEB3B"/>
                    <rect x="32" y="8" width="8" height="8" fill="#FFF"/>
                    <rect x="8" y="20" width="8" height="8" fill="#4CAF50"/>
                    <rect x="20" y="20" width="8" height="8" fill="#FFF"/>
                    <rect x="32" y="20" width="8" height="8" fill="#2196F3"/>
                    <rect x="8" y="32" width="8" height="8" fill="#FFF"/>
                    <rect x="20" y="32" width="8" height="8" fill="#9C27B0"/>
                    <rect x="32" y="32" width="8" height="8" fill="#FFF"/>
                  </svg>
                </span>
                <span class="preset-name" data-i18n="preset.favicon">Favicon</span>
                <span class="preset-sizes" data-count="6">6 tailles</span>
              </button>
              <button type="button" class="preset-card" data-preset="pwa">
                <span class="preset-icon">
                  <img src="https://images.icon-icons.com/3824/PNG/512/play_market_shopping_player_store_icon_233841.png" alt="Google Play Store" />
                </span>
                <span class="preset-name" data-i18n="preset.android">Android</span>
                <span class="preset-sizes" data-count="8">8 tailles</span>
              </button>
              <button type="button" class="preset-card" data-preset="ios">
                <span class="preset-icon">
                  <img src="https://images.icon-icons.com/3053/PNG/512/app_store_alt_macos_bigsur_icon_190386.png" alt="iOS App Store" />
                </span>
                <span class="preset-name" data-i18n="preset.ios">iOS</span>
                <span class="preset-sizes" data-count="13">13 tailles</span>
              </button>
              <button type="button" class="preset-card" data-preset="macos">
                <span class="preset-icon">
                  <img src="https://images.icon-icons.com/1/PNG/256/social_apple_mac_65.png" alt="macOS" />
                </span>
                <span class="preset-name" data-i18n="preset.macos">macOS</span>
                <span class="preset-sizes" data-count="10">10 tailles</span>
              </button>
              <button type="button" class="preset-card" data-preset="windows">
                <span class="preset-icon">
                  <img src="https://images.icon-icons.com/836/PNG/512/Windows_Phone_icon-icons.com_66782.png" alt="Windows" />
                </span>
                <span class="preset-name" data-i18n="preset.windows">Windows</span>
                <span class="preset-sizes" data-count="5">5 tailles</span>
              </button>
              <button type="button" class="preset-card" data-preset="custom">
                <span class="preset-icon">
                  <svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                    <circle fill="#9E9E9E" cx="24" cy="24" r="21"/>
                    <path fill="#FFF" d="M24 14v20M14 24h20" stroke="#FFF" stroke-width="3" stroke-linecap="round"/>
                  </svg>
                </span>
                <span class="preset-name" data-i18n="preset.custom">Custom</span>
                <span class="preset-sizes">Libre</span>
              </button>
            </div>
            
            <!-- Custom Templates -->
            <div id="customTemplatesSection" class="custom-templates-section hidden">
              <div class="templates-header">
                <h4 data-i18n="templates.title">Mes templates</h4>
                <button id="createTemplate" type="button" class="btn-text primary" data-i18n="templates.new">+ Nouveau</button>
              </div>
              <div id="customTemplatesList" class="templates-list"></div>
            </div>
            
            <!-- Custom sizes input -->
            <div id="customSizesWrap" class="custom-input-section hidden">
              <label data-i18n="customSizes.label">Tailles personnalisées (en pixels)</label>
              <input id="customSizes" type="text" placeholder="Ex: 16, 32, 48, 128, 256" data-i18n-placeholder="customSizes.placeholder" />
              <small data-i18n="customSizes.hint">Séparez les tailles par des virgules</small>
            </div>
          </div>

          <!-- Options simplifiées -->
          <div class="config-section collapsed">
            <button class="section-header collapsible" id="optionsToggle">
              <h3 data-i18n="section.options">2. Options (facultatif)</h3>
              <svg class="collapse-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            
            <div class="section-content" id="optionsContent">
              <!-- Background options -->
              <div class="option-group">
                <label class="option-label" data-i18n="background.label">Arrière-plan</label>
                <div class="toggle-group">
                  <button type="button" class="toggle-btn active" data-bg="transparent">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                      <rect x="3" y="3" width="18" height="18" stroke="currentColor" stroke-width="2" stroke-dasharray="2 2"/>
                    </svg>
                    <span data-i18n="background.transparent">Transparent</span>
                  </button>
                  <button type="button" class="toggle-btn" data-bg="color">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                      <rect x="3" y="3" width="18" height="18" fill="currentColor"/>
                    </svg>
                    <span data-i18n="background.color">Couleur</span>
                  </button>
                </div>
                <div id="bgControls" class="bg-controls hidden">
                  <div class="color-picker-row">
                    <input id="bgColor" type="color" value="#ffffff" />
                    <input id="bgHex" type="text" value="#ffffff" placeholder="#ffffff" />
                  </div>
                </div>
              </div>
              
              <!-- Sizes preview -->
              <div class="option-group" id="sizesCustomization">
                <label class="option-label" data-i18n="sizes.label">Tailles incluses</label>
                <div id="sizesList" class="sizes-list compact"></div>
              </div>
            </div>
          </div>
        </section>

        <!-- Actions -->
        <section class="actions-bar">
          <button id="generate" type="button" class="btn btn-primary" disabled>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <path d="M4 4h7v7H4zM13 4h7v7h-7zM4 13h7v7H4z" stroke="currentColor" stroke-width="2"/>
              <path d="M17 17v3M14 17h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <span data-i18n="generate">Générer les icônes</span>
          </button>
          
          <div class="export-actions hidden" id="exportActions">
            <button id="saveFolder" type="button" class="btn btn-secondary" disabled>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <polyline points="17 21 17 13 7 13 7 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <polyline points="7 3 7 8 15 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span data-i18n="save">Sauvegarder</span>
            </button>
            
            <div class="dropdown-container">
              <button id="downloadZip" type="button" class="btn btn-secondary dropdown-trigger" disabled>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                  <path d="M22 11v10H2V3h12M14 3l8 8M22 11h-8V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span data-i18n="downloadZip">Télécharger ZIP</span>
                <svg class="dropdown-arrow" width="12" height="12" viewBox="0 0 24 24" fill="none">
                  <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
              <div class="dropdown-menu hidden" id="downloadOptions">
                <div class="dropdown-header" data-i18n="download.formats">Formats à inclure</div>
                <label class="dropdown-option">
                  <input type="checkbox" id="includePNG" checked>
                  <span>PNG</span>
                </label>
                <label class="dropdown-option">
                  <input type="checkbox" id="includeWebP" checked>
                  <span>WebP</span>
                </label>
                <label class="dropdown-option">
                  <input type="checkbox" id="includeICO" checked>
                  <span>Favicon ICO</span>
                </label>
                <label class="dropdown-option hidden" id="svgOption">
                  <input type="checkbox" id="includeSVG">
                  <span>SVG Source</span>
                </label>
                <div class="dropdown-divider"></div>
                <button id="downloadZipConfirm" type="button" class="btn btn-primary btn-sm full-width">
                  <span data-i18n="download.confirm">Télécharger</span>
                </button>
              </div>
            </div>
          </div>
        </section>

        <!-- Status -->
        <div id="status" class="status-message hidden"></div>

        <!-- Generated Icons -->
        <section class="results-section hidden" id="resultsSection">
          <h2 data-i18n="results.title">Icônes générées</h2>
          <div id="outputs" class="icons-grid"></div>
        </section>

      </main>

      <footer class="app-footer">
        <span id="folderSupport" class="support-hint"></span>
      </footer>
    </div>

    <!-- Template Creation Modal -->
    <div id="templateModal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2 data-i18n="modal.title">Créer un template personnalisé</h2>
          <button type="button" class="modal-close" id="closeModal">×</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label data-i18n="modal.templateName">Nom du template</label>
            <input type="text" id="templateName" placeholder="Mon template" data-i18n-placeholder="modal.templateNamePlaceholder" />
          </div>
          <div class="form-group">
            <label data-i18n="modal.sizes">Tailles (en pixels)</label>
            <input type="text" id="templateSizes" placeholder="16, 32, 48, 128, 256" data-i18n-placeholder="modal.sizesPlaceholder" />
            <small data-i18n="customSizes.hint">Séparez les tailles par des virgules</small>
          </div>
          <div class="form-group">
            <label data-i18n="modal.suggestedSizes">Tailles suggérées</label>
            <div class="suggested-sizes">
              <button type="button" class="size-suggestion" data-sizes="16,32,48" data-i18n="modal.small">Petites (16-48)</button>
              <button type="button" class="size-suggestion" data-sizes="64,128,256" data-i18n="modal.medium">Moyennes (64-256)</button>
              <button type="button" class="size-suggestion" data-sizes="512,1024" data-i18n="modal.large">Grandes (512-1024)</button>
              <button type="button" class="size-suggestion" data-sizes="16,32,48,64,128,256,512" data-i18n="modal.allSizes">Toutes tailles</button>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="cancelTemplate" data-i18n="modal.cancel">Annuler</button>
          <button type="button" class="btn btn-primary" id="saveTemplate" data-i18n="modal.save">Sauvegarder</button>
        </div>
      </div>
    </div>

    <script src="./app.js" type="text/javascript"></script>
  </body>
</html>